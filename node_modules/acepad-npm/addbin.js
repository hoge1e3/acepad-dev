import {PackageJson} from "./pkg.js";
export async function main(name,path){
    const p=new PackageJson(this.resolve());
    const bin=getbin(p.obj);
    if(!path){
        path=p.dir.rel(`${name}.js`);
    }
    path=this.resolve(path);
    if(!path.exists()){
        throw new Error(`${path} not exists`);
    }
    bin[name]=path.relPath(p.dir);
    p.save();
}
function getbin(obj){
    if(!obj.bin){
        obj.bin={};
    }else if(typeof obj.bin==="string"){
        obj.bin={
            [obj.bin]:obj.bin,
        };
    }
    return obj.bin;
}