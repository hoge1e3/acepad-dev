#!run
// @acepad/filetree
import {show} from "@acepad/widget";
/*import {generator} from "@hoge1e3/dom";
import css from "@acepad/css";
import {sibling,file} from "@acepad/here";
import {update} from "@hoge1e3/dom-updater";
const t=generator();*/
import {render} from "./render.js";
import {recents} from "@acepad/files";
export function recset(sh){
  const avail=new Set();
  for(let r of recents.list(sh)){
    //this.echo(r);
    while(r){
      avail.add(r.path());
      r=r.up();
    }
  }
  return avail;
  //this.echo(...avail);
}
let w;
export function main(){
  if(w){
    w.show();
    return ;
  }
  w=show("<div>",{width:50,buttons:[
      //{command:"close",caption:"x"},
      {command:"minify",caption:"_"},
  ],noMenu:true,});
  const sh=this;
  const home=sh.resolve(sh.$home);
  const e=render(home,(f)=>sh.edit(f,{nomin:true}),
  recset(sh));
  w.print(e);
}
