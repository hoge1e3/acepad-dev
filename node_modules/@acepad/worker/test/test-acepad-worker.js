import * as worker from "@acepad/worker";
import * as assert from "assert";
import {wrap} from "@hoge1e3/splashscreen";
/*
import * as rpc from 
    "https://unpkg.com/@hoge1e3/rpc@1.0.1/dist/index.js";
*/
import pNode from "petit-node";
export async function main(){
    //const e=pNode.resolveEntry("@acepad/worker-tester",this.getcwd());
    let here=this.resolve(import.meta.url).up().resolveLink();
    let main=here.rel("testworker.js");
    this.echo(main);
    const c=await wrap(
        worker.createProxy(main),
        "create worker"
    );
    //const c=await rpc.proxy.client(w,"test");
    this.echo(await c.test(21));
    await c.writeLog(here.rel("log.txt").path());
}    
