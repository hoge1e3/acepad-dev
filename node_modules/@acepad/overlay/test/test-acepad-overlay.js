import * as overlay from "@acepad/overlay";
import * as assert from "assert";
import {show} from "@acepad/widget";
import {generator} from "@hoge1e3/dom";
import {bounded} from "@hoge1e3/dom-bind";
export async function main(){
    const t=generator();
    const d=(t.div({class:"wid"},
       t.h1("test"),
       "test= ",
       t.input({value:"test",id:"edit",readonly:true,
           onchange(){
               document.querySelector(".wid h1").innerText=
               this.value;
           },
       }) ,
       t.button({onclick},"add"),
       
       
    ));
    function onclick(){
        this.parentNode.insertBefore(t.input(),this);
    }
    show(d);
    const acepad=bounded("#acepad");
    assert.ok(acepad);
    overlay.activate(acepad,d,{dynamic:true});
    //document.querySelector("#edit").readonly=true;
/*
    let acepad=this.$acepad;
    for(let e of document.querySelectorAll(".wid input")){
        const editor=overlay.overlay(e);
        acepad.edit(editor);
        let r=e.getBoundingClientRect();
        let {row,column}=editor.renderer.
            pixelToScreenCoordinates(r.left+5,r.top+5); 
        console.log("rc",{row,column});
        //acepad.selectKeyDevice(null,editor);
    }*/
}    

