
const pkgattrs="main name type version dependencies types repository description license author keywords".
split(" ");
const optattrs="devDependencies files bin scripts".split(" ");
function findTmpl(d){
    const n="commonAttrs.json";
    const t=d.closest((f)=>f.rel(n).exists()).rel(n).obj();
    console.log("tmpl",t);
    return t;
}
export function checkattrs(d){
    const s=new Set();
    const tmpl=findTmpl(d);
    /*for(let f of h.recursive()){
        if(f.name()!="package.json")continue;*/
        const f=d.rel("package.json");
        const o=f.obj();
        for(let k of pkgattrs){
            if(!(k in o)){
                if(k in tmpl){
                    o[k]=tmpl[k];
                    f.obj(o);
                }else{
                    s.add(k);
                }
            }
        }
        //Object.keys(o).forEach(k=>s.add(k));
    //}
    return s;
    //console.log(...s);
    
}