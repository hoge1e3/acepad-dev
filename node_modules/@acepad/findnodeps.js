#!run
import {PackageJson} from "@acepad/npm";
export async function main(){
  const f=PackageJson.find("@acepad/with-fs",this.resolve("."));
  function traverse(pkg) {
    for (let k in pkg.obj.dependencies) {
      try {
        const d=PackageJson.find(k, pkg.dir);
        if (d==null) throw new Error(k+" is not found from "+pkg.dir);
        traverse(d);
      }catch(e) {
        console.error(e);
      }
    }
    console.log(pkg.obj.name);
  }
  traverse(f);
  /*  for (let f of this.resolve(".").listFiles()) {
        if (!f.isDir()) continue;
        if (!f.rel("package.json").exists()) continue;
        //this.echo(f);
        const o=f.rel("package.json").obj();
        if (Object.keys(o.dependencies||{}).length==0) {
          this.echo(f);
        }
    }*/
}
