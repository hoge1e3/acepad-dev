import { ObjectEntry } from './objects.js';
import { BranchName, APIConfig, Hash } from './types.js';
export interface WebApiFactory<I, C, W extends WebApi<C>> {
    init(initializer: I): Promise<W>;
    load(config: C): Promise<W>;
}
export interface WebApi<C> {
    config: C;
    setHead(branch: BranchName, current: Hash, next: Hash): Promise<void>;
    addHead(branch: BranchName, next: Hash): Promise<void>;
    hasHead(branch: BranchName): Promise<boolean>;
    getHead(branch: BranchName): Promise<Hash>;
    uploadObjects(objects: ObjectEntry[]): Promise<Date>;
    downloadObjects(hashList: Hash[]): Promise<ObjectEntry[]>;
}
export declare class PHPClientFactory implements WebApiFactory<string, APIConfig, PHPClient> {
    init(serverUrl: string): Promise<PHPClient>;
    load({ serverUrl, repoId, apiKey }: APIConfig): Promise<PHPClient>;
}
export declare class PHPClient implements WebApi<APIConfig> {
    serverUrl: string;
    repoId: string;
    apiKey: string;
    config: APIConfig;
    constructor(serverUrl: string, repoId: string, apiKey: string);
    toString(): string;
    private post;
    addHead(branch: BranchName, next: Hash): Promise<void>;
    setHead(branch: BranchName, current: Hash, next: Hash): Promise<void>;
    hasHead(branch: BranchName): Promise<boolean>;
    getHead(branch: BranchName): Promise<Hash>;
    uploadObjects(objects: ObjectEntry[]): Promise<Date>;
    downloadSince(since: Date): Promise<{
        objects: ObjectEntry[];
        newest: Date;
    }>;
    downloadObjects(hashList: Hash[]): Promise<ObjectEntry[]>;
}
