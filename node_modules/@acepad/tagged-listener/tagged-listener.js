// @acepad/tagged-listener
const stg=Symbol();
export function setListener(
  target,type,tag,listener
){
  const m=getmap(target);
  const k=`${type}:${tag}`;
  const h=m.get(k);
  if(h){
    target.removeEventListener(type,h);
  }
  m.set(k,listener);
  target.addEventListener(type,listener);
}
function getmap(target){
  let r=target[stg];
  if(!r){
    r=new Map();
    target[stg]=r;
  }
  return r;
}