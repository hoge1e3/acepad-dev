// acepad-genai
import {post} from "user-gesture";

export function prompt(t,f){
    return `This is an incomplete code fragment ${f?"in "+f.name():""}.
guess the code by comments and function/method/class names.

${t}
`;
}
export function gen(sh){
    let acepad=sh.$acepad;
    let file;
    let editor=acepad.getMainEditor();
    let i=acepad.sessionInfo(editor.session);
    if(i.file){
        file=i.file;
    }
    let t=editor.getSelectedText()||"";
    const pr=prompt(t, file);
    const url="https://chatgpt.com";
    post(()=>{
        navigator.clipboard.writeText(pr);
        window.open(url); 
    });
}