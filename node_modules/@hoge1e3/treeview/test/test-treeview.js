import {css,TreeView,chkdatamap} from "@hoge1e3/treeview";
import * as assert from "assert";
import {showWidget} from "acepad-widget";

export async function main(){
    css();
    const csss=`
  width: 100%;
  height: 90%;
  overflow:scroll;
`;
    const cn=$(`<div>
    <div>files</div>
 <div class="scr" style="${csss}"></div>   
</div>`);
    const w=showWidget(cn,{
        width:30,
    }); 
    
    const t=new TreeView([{
        name:"hoge",
        children:   [{
            name:"fuga",
        },{
            name:"piyo",
        }],
    },{name:"foo"}],cn.find(".scr")[0]);
    //chkdatamap();
    for (let ty of ["select","expand","collapse"]) {
        t.on(ty,(e)=>console.log(ty,e));
    }
    t.on("select",({data})=>{
        if (data.name==="piyo") {
            data.parent.children.push({name:"aaa"});
            data.parent.refresh();
        }
    });
    $(w.element).css({fontSize:"30px"}).on("touchstart",(e)=>{
        e.stopPropagation();
        //e.preventDefault();
    });
    //setTimeout(chkdatamap,1000);
}    
