import { SFile } from "@hoge1e3/sfile";
import { Checkout } from "./store";
export type DirInfo = {
    lastUpdate: number;
};
export type DirInfos = {
    [key: string]: DirInfo;
};
export type TreeData = {
    tree: DirInfos;
    __id__: string;
};
export type Config = {
    excludes: string[];
};
export type RepoData = {
    name: string;
    config?: Config;
};
export declare function find(dir: SFile): WorkDirStatus;
export type WorkDirStatus = WorkDir & {
    name: string;
    __id__: string;
    lcltree1: DirInfos;
    rmtco?: Checkout;
};
export type WorkDir = {
    repof: SFile;
    treef: SFile;
    dir: SFile;
    sync: SFile;
    getExcludes(): (f: SFile) => boolean;
    getLocalTree2(): DirInfos;
    getLocalTree1(): DirInfos;
    updateTree(): void;
    getConfig(): Config;
    writeRepo(obj: RepoData): void;
    readRepo(): RepoData;
    writeLocal(obj: TreeData): void;
    readLocal(): TreeData;
    getDirInfo(_dir?: SFile): DirInfos;
    init({ name, __id__, config }: {
        name: string;
        __id__: string;
        config?: Config;
    }): void;
    branch(newname: string): void;
};
export declare function instance(dir: SFile): WorkDir;
export declare function findDotSyncDir(dir: SFile): any;
export declare function conflictFile(f: SFile, id: string): any;
