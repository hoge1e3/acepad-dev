// acepad-dotenv
import FS from "@hoge1e3/fs";
import {match} from "textmatcher";
export function config({path}){
    if(typeof path==="string"){
        path=FS.get(path);
    }
    if(path.isDir()){
        path=path.rel(".env");
    }
    for(let line of path.lines()){
        match(line,/\s*(\w+)\s*=(.*)/,(m)=>{
            //console.log("setEnv",m[1],m[2]);
            FS.setEnv(m[1],m[2]);
        });
    }
}
export async function configUp(e){
    let f;
    while(e){
        f=e.rel(".env");
        if(f.exists())break;
        f=null;
        e=e.up();    
    }
    if(f){
        config({path:f});
    }
}    
