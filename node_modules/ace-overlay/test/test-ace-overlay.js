import * as overlay from "ace-overlay";
import * as assert from "assert";
import {show} from "@acepad/widget";
import {generator} from "@hoge1e3/dom";
export async function main(){
    const t=generator();
    const d=(t.div({class:"wid"},
       t.h1("test"),
       "test= ",
       t.input({value:"test",id:"edit",readonly:true,
           onchange(){
               document.querySelector(".wid h1").innerText=
               this.value;
           },
       }) ,
       t.br(),
       t.textarea({
           style:"font-size:30px;",
           rows:5,cols:40,
       },"abc!!!!!!!\ndefoooooooo\nghijeeeeeee"),
       t.button({onclick},"add"),
    ));
    show(d);
    overlay.activate(d,{dynamic:true});
    function onclick(){
        this.parentNode.insertBefore(t.input(),this);
    }
    //document.querySelector("#edit").readonly=true;
/*
    let acepad=this.$acepad;
    for(let e of document.querySelectorAll(".wid input")){
        const editor=overlay.overlay(e);
        acepad.edit(editor);
        let r=e.getBoundingClientRect();
        let {row,column}=editor.renderer.
            pixelToScreenCoordinates(r.left+5,r.top+5); 
        console.log("rc",{row,column});
        //acepad.selectKeyDevice(null,editor);
    }*/
}    
