#!run
import {setListener} from "@acepad/tagged-listener";
export async function main(f){
  const reg=await navigator.serviceWorker.ready;
  setListener(
    navigator.serviceWorker,
    "message","console",
    (e)=>{
      if(e.data?.type!=="console"&&
         e.data?.type!=="error")return ;
      console.log("sw",e.data);
    });
  globalThis.swmeg=1;
  const script=
  this.resolve(f).text();
  reg.active.postMessage({
    type: "EVAL",
    script
  });
}

//https://edit.tonyu.jp/acepad/app/