#!run
import {getFS} from "petit-node";
import {Counter} from "@hoge1e3/counter";
//mountidb test test -lazy=2 
export async function main(mp,name,opt={}){
  if(!mp){
    throw new Error("mount point");
  }
  mp=this.resolve(mp);
  name=name||mp.name().replace(/\/$/,"");
  const lazy=(opt.lazy?opt.lazy-0:0);
  await getFS().mountAsync(mp.path(),"idb",{
    dbName: name,
    storeName: "kvStore",
    lazy,
  });
}